# https://github.com/Altinity/clickhouse-operator/blob/0.25.5/deploy/helm/clickhouse-operator/values.yaml
# we override the image
operator:
  image:
    repository: "{{ .nuon.components.img_altinity_clickhouse_operator.outputs.image.repository }}"
    tag: "{{ .nuon.components.img_altinity_clickhouse_operator.outputs.image.tag }}"
    pullPolicy: IfNotPresent

# we enable and override the image
metrics:
  enabled: true
  image:
    repository: "{{ .nuon.components.img_clickhouse_metrics_exporter.outputs.image.repository }}"
    tag: "{{ .nuon.components.img_clickhouse_metrics_exporter.outputs.image.tag }}"
    pullPolicy: IfNotPresent

# allow the operator to run on the default node group (EKS ASG) alongside other critical workloads
tolerations:
  - effect: NoSchedule
    key: CriticalAddonsOnly
    value: "true"
  - effect: NoSchedule
    key: karpenter.sh/controller
    value: "true"

# we use a secret we create ourselves using the autogenerated secret
secret:
  create: false

config:
  files:
    config.yaml:
      clickhouse:
        access:
          secret:
            namespace: clickhouse
            name: "clickhouse-operator"

serviceAccount:
  create: true

rbac:
  create: true

podLabels:
  "component.nuon.co/name": "clickhouse-operator"
  "component.nuon.co/tier": "core"

serviceMonitor:
  enabled: false
